{% extends 'base.html' %}

{% block content %}
<p>
    The questions below were generated by a <a href="https://openai.com/blog/gpt-2-1-5b-release/">GPT-2</a> model trained on over 7000 AskReddit questions. Click the "Vote" button next to a question that you find amusing, insightful or in any way enjoyable. Questions over a certain threshold of votes will be tweeted by the account <a href="https://twitter.com/AskredditButAI">@AskRedditButAI</a>
</p>

<div id="question_tweet" class="row">
    <div id="questions" class="col-md-8">
        {% for question in object_list %}
        <div id="question{{ question.id }}" class="row mb-4 border-top border-dark neutral" style="max-width: 80%; margin: auto;">
            <div class="col-auto align-middle">
                <form id="up{{ question.id }}" 
                      class="form-inline upvote vote-form" 
                      action="{% url 'main:cast_vote' %}" 
                      method="POST">
                    {% csrf_token %}
                    <input type="hidden" value="{{ question.id }}" name="question_id">
                    <input type="hidden" value="up" name="direction">
                    <input type="submit" value="&#11014;" class="btn btn-sm btn-outline-dark mt-1 mb-1">
                </form>
                <form id="down{{ question.id }}" 
                      class="form-inline downvote vote-form" 
                      action="{% url 'main:cast_vote' %}"
                      method="POST"> 
                    {% csrf_token %}
                    <input type="hidden" value="{{ question.id }}" name="question_id">
                    <input type="hidden" value="down" name="direction">
                    <input type="submit" value="&#11015;" class="mt-1 mb-1 btn btn-sm btn-outline-dark">
                </form>
            </div>
            <div class="col">
                {{ question.text }}
            </div>
        </div>
        {% empty %}
        <div class="row mb-3">
            <div class="col">
                No questions found for this date
            </div>
        </div>
        {% endfor %}
    </div>
    <div id="tweets" class="col-md-4">
        <a class="twitter-timeline" href="https://twitter.com/AskredditButAI?ref_src=twsrc%5Etfw">Tweets by AskredditButAI</a> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
    </div>
</div>

{% if page_obj.paginator.num_pages > 1 %}
    {% include "main/pagination.html" %}
{% endif %}

{% endblock content %}

{% block extra_js %}
<script type="text/javascript">
    const vote_states = {{ vote_states|safe }};
</script>
{% endblock extra_js %}