{% extends 'base.html' %}
{% load cache %}
{% block content %}


{% cache 21600 latest_tweet %}
<h1 class="display-3">{{ latest_tweet.text }}</h1>
{% endcache %}

<p>
  AskRedditButAI is a website and an AI twitter personality. It comprises 84,781 questions generated by a <a href="https://openai.com/blog/gpt-2-1-5b-release/">GPT-2</a> model trained on over 7000 AskReddit posts.
</p>

<p>
  This website presents a selection of 25 AI-generated questions each day. You can upvote or downvote each question. Every 6 hours the top voted question is tweeted by the account <a href="https://twitter.com/AskredditButAI">@AskRedditButAI</a>. Feel free to engage, answer, and/or critique the questions on Twitter.
</p>

<div id="question_tweet" class="row">
    {% cache 86400 question_list object_list.0.displayed.isoformat page_obj.number %}
    <div id="questions" class="col-md-8">
        {% for question in object_list %}
        <div id="question{{ question.id }}" class="row border-top border-dark neutral pb-2 pt-2" style="max-width: 80%; margin: auto;">
            <div class="col-auto align-middle arrow-col">
                <form id="up{{ question.id }}" 
                      class="form-inline upvote vote-form" 
                      action="{% url 'main:cast_vote' %}" 
                      method="POST">
                    {% csrf_token %}
                    <input type="hidden" value="{{ question.id }}" name="question_id">
                    <input type="hidden" value="up" name="direction">
                    <input type="submit" value="">
                </form>
                <form id="down{{ question.id }}" 
                      class="form-inline downvote vote-form" 
                      action="{% url 'main:cast_vote' %}"
                      method="POST"> 
                    {% csrf_token %}
                    <input type="hidden" value="{{ question.id }}" name="question_id">
                    <input type="hidden" value="down" name="direction">
                    <input type="submit" value="">
                </form>
            </div>
            <div class="col question-text"><p class="my-auto">{{ question.text }}</p></div>
        </div>
        {% empty %}
        <div class="row mb-3">
            <div class="col">
                No questions found for this date
            </div>
        </div>
        {% endfor %}
    </div>
    {% endcache %}
    <div id="tweets" class="col-md-4">
        <a class="twitter-timeline" href="https://twitter.com/AskredditButAI?ref_src=twsrc%5Etfw">Tweets by AskredditButAI</a> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
    </div>
</div>

{% if page_obj.paginator.num_pages > 1 %}
    {% include "main/pagination.html" %}
{% endif %}
<div id="freshcsrf" style="display: none">
    {% csrf_token %}
</div>
{% endblock content %}

{% block extra_js %}
<script type="text/javascript">
    const vote_states = {{ vote_states|safe }};
</script>
{% endblock extra_js %}
